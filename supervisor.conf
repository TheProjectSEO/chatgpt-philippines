[program:chat_workers]
command=node -r ts-node/register workers/chatWorker.ts
process_name=%(program_name)s_%(process_num)02d
numprocs=8
directory=/home/user/chatgpt-philippines
autostart=true
autorestart=true
startretries=3
user=www-data
redirect_stderr=true
stdout_logfile=/var/log/supervisor/chat_worker_%(process_num)02d.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=NODE_ENV="production",WORKER_ID="worker-%(process_num)02d",WORKER_CONCURRENCY="5"

[group:workers]
programs=chat_workers
priority=999
